# topmark:header:start
#
#   file         : tox.ini
#   file_relpath : tox.ini
#   project      : TopMark
#   license      : MIT
#   copyright    : (c) 2025 Olivier Biot
#
# topmark:header:end

[tox]
min_version = 4.0
env_list = py310, py311, py312, py313, py310-typecheck, py311-typecheck, py312-typecheck, py313-typecheck
isolated_build = true            # respects PEP 517/518 if you use them

[testenv]
package = skip # Do not build packages in test environments
usedevelop = true                # Use the source tree directly, no egg-link
deps = -r requirements-dev.txt   # pytest, mypy â€¦ already in there
commands =
    pytest -q tests

# --- per-Python Pyright envs ---
[testenv:py310-typecheck]
description = Run pyright type checks on Python 3.10
basepython = python3.10
usedevelop = true
deps = pyright
commands = pyright

[testenv:py311-typecheck]
description = Run pyright type checks on Python 3.11
basepython = python3.11
usedevelop = true
deps = pyright
commands = pyright

[testenv:py312-typecheck]
description = Run pyright type checks on Python 3.12
basepython = python3.12
usedevelop = true
deps = pyright
commands = pyright

[testenv:py313-typecheck]
description = Run pyright type checks on Python 3.13
basepython = python3.13
usedevelop = true
deps = pyright
commands = pyright
