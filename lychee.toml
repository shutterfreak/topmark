# topmark:header:start
#
#   project      : TopMark
#   file         : lychee.toml
#   file_relpath : lychee.toml
#   license      : MIT
#   copyright    : (c) 2025 Olivier Biot
#
# topmark:header:end

timeout = 20        # seconds per request (default is lower)
max_retries = 3     # retry transient failures
retry_wait_time = 2 # seconds between retries
max_concurrency = 8 # lower = fewer parallel requests to GitHub

# (Optional) identify as a normal browser; can help with some hosts
user_agent = "Mozilla/5.0 (compatible; lychee)"

# (Optional) cache results during a run so repeated links aren’t re-checked
cache = true

# NOTE: Patterns in 'exclude' are regular expressions matched against full URLs.
# Don’t fail on anchors GitHub sometimes delays
exclude = [
  "mailto:*",
  "http://localhost:*",
  "http://127.0.0.1:*",
  "^file://.*/docs/api/internals/topmark/index\\.md$", # generated by mkdocs-gen-files (not present pre-build)
  "https://github.com/.*/releases",
  "https://github.com/.*/issues",
  "https://github.com/.*/blob/.*",
]
accept = ["200..=299", "403"] # some sites block CI user agents
